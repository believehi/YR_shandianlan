(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/task/Taskdetails"],{"246f":function(t,e,a){"use strict";a.r(e);var i=a("3e2b"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=s.a},"3e2b":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,s=n(a("e1ec"));function n(t){return t&&t.__esModule?t:{default:t}}var r={data:function(){return{shows:0,rwArray:{},rwbzArray:{},rwid:"",tisi:"",tisis:"",TaskId:"",choosedaylist:[],isActive:-1,activedata:"",date:"",Merimg:[]}},onLoad:function(t){i=this,this.rwid=t.rwid,this.rwlist(this.rwid),s.default.islogin(!0)},methods:{rwlist:function(e){var a=this;t.showLoading({title:"加载中....",mask:!0}),t.request({url:s.default.websiteUrl+"task/gettask",method:"GET",data:s.default.postdata({id:e,userid:s.default.getstate().userid}),success:function(e){if(200==e.data.code){var i=new Date;a.TaskId=e.data.data.baseinfo.TaskId,a.rwArray=e.data.data.baseinfo,a.rwbzArray=e.data.data.baseinfo.Instruction.split(";"),a.Merimg=e.data.data.baseinfo.Pictures.split(";"),a.date=e.data.data.baseinfo.EndDate;for(var n=a.date.replace(/\-/g,"/"),r=new Date(n),c=parseInt(parseInt(r.getTime()-i.getTime())/864e5)+1,o=c>5?5:c,u=["周日","周一","周二","周三","周四","周五","周六"],l=0;l<o;l++){var d=new Object,w=new Date(parseInt(i.getTime())+864e5*l);0==l?(d.cndes="今天",d.monthday=w.getMonth()+1+"-"+w.getDate()):i.getDay()+l>6?(d.cndes=u[i.getDay()+l-7],d.monthday=w.getMonth()+1+"-"+w.getDate()):(d.cndes=u[i.getDay()+l],d.monthday=w.getMonth()+1+"-"+w.getDate()),a.choosedaylist.push(d)}}else s.default.goout(e.data.info),t.showToast({icon:"none",title:e.data.info});t.hideLoading()},fail:function(e){t.showToast({icon:"none",title:"网络异常,请下拉刷新重试！"})}})},lqbut:function(e){var a=this;this.choosedaylist.length=0,this.rwlist(this.rwid);new Date;var i=this.rwArray.RState,n=i>0?"取消":"领取";""==this.activedata?t.showToast({icon:"none",title:"请选择日期！"}):t.request({url:s.default.websiteUrl+"task/ReceiveTask",method:"GET",data:s.default.postdata({taskid:this.rwid,userid:s.default.getstate().userid,receivedate:this.activedata,type:"1",CState:i>0?"0":"1"}),success:function(e){200==e.data.code?(a.choosedaylist.length=0,a.rwlist(a.rwid),t.showToast({title:n+"成功。"})):(s.default.goout(e.data.info),t.showToast({icon:"none",title:e.data.info}))},fail:function(){t.hideLoading(),t.showToast({icon:"none",title:"网络异常,请重试！"})}})},scbut:function(){var e=this;this.choosedaylist.length=0;var a=this.rwArray.CState,n=a>0?"取消":"收藏";t.request({url:s.default.websiteUrl+"task/ReceiveTask",method:"GET",data:s.default.postdata({taskid:i.rwid,userid:s.default.getstate().userid,type:"2",CState:a>0?"0":"1"}),success:function(a){200==a.data.code?(e.rwlist(e.rwid),t.showToast({title:n+"成功。"})):(s.default.goout(a.data.info),t.showToast({icon:"none",title:a.data.info}))},fail:function(){t.showToast({icon:"none",title:"网络异常,请重试！"})}})},active:function(t){this.isActive=t.currentTarget.id,this.activedata=t.currentTarget.id}}};e.default=r}).call(this,a("649d")["default"])},"65d2":function(t,e,a){"use strict";var i=a("fcdb"),s=a.n(i);s.a},ec68:function(t,e,a){"use strict";a.r(e);var i=a("ffff"),s=a("246f");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("65d2");var r=a("2877"),c=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},ed71:function(t,e,a){"use strict";a("f15c");var i=n(a("b0ce")),s=n(a("ec68"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},fcdb:function(t,e,a){},ffff:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"uni-rw-time"},[a("view",{staticClass:"uni-rw-title"},[a("text",[t._v(t._s(t.rwArray.TaskName))])]),a("view",{staticClass:"uni-rw-ms col"},[a("view",{staticClass:"uni-rw-sm"},[t._v("任务说明：")]),a("view",{staticClass:"uni-rw-m"},[a("text",[t._v(t._s(t.rwArray.explain))])])])]),a("view",{staticClass:"uni-rw-time"},[a("view",{staticClass:"uni-rw-ms col"},[a("view",{staticClass:"uni-rw-sm"},[t._v("任务要求：")]),a("view",{staticClass:"uni-rw-yq"},[a("text",[t._v(t._s(t.rwArray.Requirement)+"人")])])])]),a("view",{staticClass:"uni-rw-time"},[a("view",{staticClass:"uni-rw-ms col"},[a("view",{staticClass:"uni-rw-sm"},[t._v("商家名称：")]),a("view",{staticClass:"uni-rw-m"},[a("text",[t._v(t._s(t.rwArray.Merchant))])])])]),a("view",{staticClass:"uni-rw-time"},[a("view",{staticClass:"uni-rw-ms col uni-sj-wz"},[a("view",{staticClass:"uni-rw-sm"},[t._v("商家位置：")]),a("view",{staticClass:"uni-rw-m"},[a("text",[t._v(t._s(t.rwArray.Position))])])]),a("view",{staticClass:"uni-rw-ms col"},[a("view",{staticClass:"uni-rw-sm"},[t._v("商家照片：")]),a("view",{staticClass:"uni-rw-m"},t._l(t.Merimg,function(t,e){return a("image",{key:e,attrs:{src:t,mode:""}})}))])]),a("view",{staticClass:"uni-rw-time"},[t._m(0),a("view",{staticClass:"uni-time-list"},t._l(t.choosedaylist,function(e,i){return a("view",{key:i,staticClass:"uni-time-item",class:{active:e.monthday==t.isActive},attrs:{id:e.monthday,eventid:"3cbf77c9-0-"+i},on:{click:t.active}},[a("text",[t._v(t._s(e.cndes))]),a("text",[t._v(t._s(e.monthday))])])}))]),a("view",{staticClass:"uni-rw-time"},[t._m(1),t._l(t.rwbzArray,function(e,i){return a("view",{key:i,staticClass:"uni-cz-bz"},[a("text",[t._v(t._s(e))])])})],2),a("view",{staticClass:"uni-but-item"},[a("view",{staticClass:"uni-sc-but",class:{lqactives:t.rwArray.CState>0},attrs:{"data-id":t.rwArray.CState,eventid:"3cbf77c9-1"},on:{click:t.scbut}},[a("uni-icon",{staticClass:"uni-x1-icon",attrs:{mpcomid:"3cbf77c9-0"}}),a("text",[t._v(t._s(t.rwArray.CState>0?"取消收藏":"收藏任务"))])],1),a("view",{staticClass:"uni-lqs-but",class:{lqactive:t.rwArray.RState>0},attrs:{id:t.rwArray.RState,eventid:"3cbf77c9-2"},on:{click:t.lqbut}},[a("text",[t._v(t._s(t.rwArray.RState>0?"已领取":"领取任务"))])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-rw-ms col uni-sj-wz"},[a("view",{staticClass:"uni-rw-sm"},[t._v("日期选择")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-rw-ms col uni-sj-wz"},[a("view",{staticClass:"uni-rw-sm"},[t._v("操作步骤")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})}},[["ed71","common/runtime","common/vendor"]]]);