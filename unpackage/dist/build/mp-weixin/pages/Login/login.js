(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Login/login"],{"00cc":function(e,n,t){"use strict";t.r(n);var o=t("f9c9"),i=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);n["default"]=i.a},5763:function(e,n,t){"use strict";var o,i=function(){var e=this,n=e.$createElement;e._self._c},a=[];t.d(n,"b",function(){return i}),t.d(n,"c",function(){return a}),t.d(n,"a",function(){return o})},8104:function(e,n,t){"use strict";(function(e){t("557f"),t("921b");o(t("66fd"));var n=o(t("d8fb"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},d100:function(e,n,t){"use strict";var o=t("fc8e"),i=t.n(o);i.a},d8fb:function(e,n,t){"use strict";t.r(n);var o=t("5763"),i=t("00cc");for(var a in i)"default"!==a&&function(e){t.d(n,e,function(){return i[e]})}(a);t("d100");var s,d=t("f0c5"),u=Object(d["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=u.exports},f9c9:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("436c"));function i(e){return e&&e.__esModule?e:{default:e}}var a={data:function(){return self=this,{mobile:"",password:"",openids:"",openid:"",appid:"wxf3faac5f46f05b2e",secret:"31dab934c364c3ce9f1a355ccd9cfe1f"}},onLoad:function(){this,o.default.islogin()&&e.switchTab({url:"../index/index"})},methods:{openregister:function(){e.navigateTo({url:"register"})},openphonelogin:function(){e.navigateTo({url:"phonelogin"})},MerchabtBut:function(){e.navigateTo({url:"MerLogin"})},loginbtn:function(){""!=this.mobile?o.default.checkmobile(this.mobile)?this.password.length<6||this.password.length>12?e.showToast({icon:"none",title:"请输入6-12个字符的密码",duration:1500}):(e.showLoading({mask:!0,title:"登录中，请稍候"}),e.request({url:o.default.websiteUrl+"/user/loginbymobile",data:{loginMark:o.default.getloginMark(),token:"",data:'{"mobile": "'+self.mobile+'","password": "'+self.password+'","type":"1"}'},method:"GET",dataType:"json",success:function(n){if(e.hideLoading(),200==n.data.code){var t=n.data.data.baseinfo;e.setStorageSync("token",t.token),o.default.setstate(t.userId,t.mobile,t.nickName),e.showToast({title:"登录成功"}),e.reLaunch({url:"../index/index"})}else e.showToast({icon:"none",title:n.data.info})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"网络异常,请稍后重试"})}})):e.showToast({icon:"none",title:"请输入正确的手机号码",duration:1500}):e.showToast({icon:"none",title:"请输入登录手机号",duration:1500})},getuserinfo:function(){e.showLoading({mask:!0,title:"登录中，请稍候"}),e.login({provider:"weixin",success:function(n){n.code||n.authResult.openid?e.getUserInfo({success:function(t){e.request({url:o.default.websiteUrl+"user/getopenidbycode",data:{loginMark:o.default.getloginMark(),token:"",data:'{"code": "'+n.code+'"}'},method:"GET",dataType:"json",success:function(n){if(200==n.data.code){var i=n.data.data.openinfo.openid;e.request({url:o.default.websiteUrl+"user/reg",data:{loginMark:o.default.getloginMark(),token:"",data:'{"openid": "'+i+'","headimgurl":"'+t.userInfo.avatarUrl+'","nikename":"'+t.userInfo.nickName+'","province":"'+t.userInfo.province+'","country":"'+t.userInfo.country+'","city":"'+t.userInfo.city+'","sex":"'+t.userInfo.gender+'"}'},method:"GET",dataType:"json",success:function(n){if(e.hideLoading(),200==n.data.code){var t=n.data.data.baseinfo;console.log(t),e.setStorageSync("token",t.token),o.default.setstate(t.userId,t.mobile,t.nickName),e.showToast({title:"登录成功"}),e.switchTab({url:"../index/index"})}else e.showToast({icon:"none",title:n.data.info,duration:1500})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"网络异常,请稍后重试"})}})}else e.hideLoading(),e.showToast({icon:"none",title:"获取会员信息失败！"})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"获取信息出错！"})}})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"获取用户信息失败！"})}}):(e.hideLoading(),e.showToast({icon:"none",title:"获取用户登录状态失败！"+JSON.stringify(n)}))},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"网络错误，请稍后再试"})}})},openpage:function(){e.navigateTo({url:"../my/resetpassword"})}}};n.default=a}).call(this,t("543d")["default"])},fc8e:function(e,n,t){}},[["8104","common/runtime","common/vendor"]]]);